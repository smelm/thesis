

\newtcbox{\hlh}[1][orange]{on line, 
        colback=#1!100!white,
        boxrule=0pt, 
        boxsep=0pt,
        left=5pt,
        right=5pt,
        top=3pt,
        bottom=8pt
}


\newtcbox{\hl}[1][gray]{on line, 
        colback=#1!100!white,
        boxrule=0pt, 
        boxsep=0pt,
        left=5pt,
        right=5pt,
        top=8pt,
        bottom=5pt
}

\newtcbox{\matchedBox}[1][gray]{on line, 
        colback=#1!100!white,
        boxrule=0pt, 
        boxsep=0pt,
        left=0pt,
        right=1pt,
        top=5pt,
        bottom=5pt
}

\newtcbox{\matchedBoxSmall}[1][gray]{on line, 
        colback=#1!100!white,
        boxrule=0pt, 
        boxsep=0pt,
        left=0pt,
        right=1pt,
        top=2pt,
        bottom=2pt
}

\newcommand*{\hly}[1]{\hl[yellow]{#1}}
\newcommand*{\hlg}[1]{\hl[lime]{#1}}

\newtcbox{\codeBox}[1][gray]{on line, 
        % arc=7pt,
        colback=#1!30!white,
        colframe=#1!30!white,
        % colframe=#1!50!black,
        before upper={\rule[-3pt]{0pt}{10pt}},
        boxrule=0pt, 
        boxsep=0pt,
        left=3pt,
        right=3pt,
        top=2pt,
        bottom=1pt
}


\newtcbox{\patternBox}[1][white]{on line, 
        arc=2pt,
        colback=#1!30!white,
        colframe=#1!20!black,
        % colframe=#1!50!black,
        before upper={\rule[-3pt]{0pt}{10pt}},
        boxrule=1pt, 
        boxsep=0pt,
        left=3pt,
        right=3pt,
        top=2pt,
        bottom=1pt
}

\setlength{\marginparwidth}{2cm}
\newcommand*{\regex}[1]{{\fontfamily{qcr}\selectfont #1}}
\newcommand*{\pattern}[1]{\patternBox{\regex{#1}}}
\newcommand*{\inp}[1]{\enquote{\regex{#1}}}
\newcommand*{\code}[1]{\codeBox{\texttt{#1}}}
\newcommand{\keyword}[1]{\texttt{#1}}
\newcommand*{\matched}[1]{\matchedBox[Gold1!80!white]{#1}}
\newcommand*{\matchedSmall}[1]{\matchedBoxSmall[yellow]{#1}}

\newcommand*{\bs}{\textbackslash}
\newcommand*{\caret}{\string^}
\newcommand*{\dollar}{\string$}

\newcommand*{\openBracket}{\texttt{[}}
\newcommand*{\closingBracket}{\texttt{]}}
\newcommand*{\inBrackets}[1]{\openBracket #1\closingBracket}

\newcommand*{\placeholder}{\emph{<pattern>}}
\newcommand*{\expr}{\emph{<expression>}}


\lstdefinelanguage{rexregex} {}

\lstdefinestyle{shared}{
    numbers=left,
    numberstyle=\scriptsize\color{black},
    numbersep=14pt,
    basicstyle=\ttfamily,
}

\lstdefinestyle{rexregex}{
    style=shared,
    morekeywords={as,or,of,to,}, 
    keywordstyle=\color{black}\bfseries,
    identifierstyle={\color{MediumPurple4!80!black}},
    emph={any,define,either,except,many,same,begin,maybe,end,named},
    emphstyle={\color{blue!80!black}\bfseries},
    morestring={[b]"},
    stringstyle=\color{Firebrick3!90!white}, % LightPink2!70!black
}

\lstnewenvironment{rexregex}[1][]{\lstset{language=rexregex,style=rexregex,#1}}{}

\newcommand*{\ws}{\char32}

\newtcolorbox[blend into=figures]{boxFigure}[1][]{float=htb, halign=center,  every float=\centering, #1, colback=white, colframe=blue!90!white}

\tcbset{myTabStyle/.style={
    enhanced,
    colback=white!10!white,
    colframe=orange!70!black,
    colbacktitle=orange!90!white, 
    coltitle=black,
}}

\newcommand*{\mytoprule}{\specialrule{1.5pt}{0pt}{0pt}}

\newtcolorbox[blend into=tables]{boxTable}[2][]{halign=center,  title={#2}, every float=\centering, #1, colback=white, colframe=orange!90!black,before={\vspace{3mm}}}
    

\newtcolorbox[blend into=tables]{newBoxTable}[2][]{myTabStyle,halign=center, every float=\centering, #1, colback=orange!20!white, colframe=orange!90!black, tabularx*={\renewcommand{\arraystretch}{1}}{#2},boxrule=1.5pt,before={\vspace{3mm}}}

\tcbset{lstBox/.style={
    listing only,
    enhanced,
    colframe=blue!90!white, 
    left=8mm,
    halign=center, 
    every float=\centering, 
    colback=white, 
    boxrule=1.5pt,
    before={\vspace{5mm}},
}}

\AtBeginDocument{
    \newtcblisting[blend into=listings]{rexregexBox}[1][]{% 
        lstBox,
        listing options = { 
            style=rexregex,
            escapechar={\%},
        },
        #1,
        colback=cyan!20!white,
        borderline west={0.5mm}{17pt}{blue!90!white},
    }

    \newtcblisting[blend into=listings]{pseudoCode}[1][]{% 
        lstBox,
        #1,
        colback=cyan!20!white,
        borderline west={0.5mm}{17pt}{blue!90!white},
        listing options = { 
            mathescape=true,
            style=shared,
            basicstyle=\small\ttfamily,
            emph={function,mod,switch,return,case,for,to,if,else,end,until}, 
            morekeywords={Character,Any,CharacterClass,Alternative,Sequence,Quantifier,Group,Backreference}, 
            keywordstyle=\color{black}\bfseries,
            morestring={[b]"},
            stringstyle=\color{Firebrick3!90!white},
            escapechar={\%},
            emphstyle={\color{blue!80!black}\bfseries},
        },
    }
    % keywordstyle=\color{black}\bfseries,
    % identifierstyle={\color{MediumPurple4!80!black}},
    % emph={any,define,either,except,many,same,begin,maybe,end,named},
    % morestring={[b]"},

    \newtcolorbox[blend into=listings]{listingBox}[1][]{% 
        lstBox,
        #1,
        colback=cyan!20!white,
        listing options = { 
        style=shared,
        mathescape=true },
    }

    \newtcolorbox[blend into=figures]{listingBoxFigure}[1][]{% 
        lstBox,
        #1,
        colback=cyan!20!white,
        listing options = { 
        style=shared,
        mathescape=true },
    }

    \newtcolorbox{inferInputBox}[0][]{
        lstBox,
        colback=cyan!5!white,
    }
}

\newcolumntype{Y}{>{\centering\arraybackslash}X}

\newcommand{\rexinline}[1]{\code{\lstinline[style=rexregex]{#1}}}

\newcommand*{\utgast}{\textsc{utgast}}


\newcommand*{\listingref}[1]{\textbf{Listing~\ref{#1}}}
\newcommand*{\tableref}[1]{\textbf{Table~\ref{#1}}}
\newcommand*{\figureref}[1]{\textbf{Figure~\ref{#1}}}
